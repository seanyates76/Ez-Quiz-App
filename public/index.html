<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>EZ-Quiz</title>

  <!-- Preserve common assets (adjust paths only if yours differ) -->
  <link rel="icon" href="icons/favicon.ico">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
  <link rel="manifest" href="manifest.webmanifest">

  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="icons/brand-title-source.png" alt="EZ-Quiz" class="brand-img">
    </div>

    <!-- Manual-only dropdown -->
    <details class="menu" id="manualMenu">
      <summary>Manual ▾</summary>
      <div class="menu-sheet">
        <button type="button" id="openEditor">Open Manual Editor</button>
        <hr>
        <button type="button" id="menuLoadTxt">Load .txt</button>
        <button type="button" id="menuUseDemo">Use Demo Set</button>
        <button type="button" id="menuClearTxt">Clear Editor</button>
        <hr>
        <button type="button" id="menuStartQuiz">Start Quiz (from editor)</button>
        <button type="button" id="menuHelp">Help</button>
      </div>
    </details>
  </header>

  <main class="wrap">
    <!-- Primary generator -->
    <section class="card hero">
      <h1>Generate a Quiz</h1>
      <form id="quickForm" class="quick-form" autocomplete="off">
        <label for="quickTopic" class="sr">Topic</label>
        <input id="quickTopic" name="topic" placeholder="Topic (e.g., World History)" required>
        <label for="quickCount" class="sr">Length</label>
        <input id="quickCount" name="count" type="number" min="1" max="20" value="5" required>
        <label for="quickDifficulty" class="sr">Difficulty</label>
        <select id="quickDifficulty" name="difficulty" aria-label="Difficulty">
          <option value="easy">Easy</option>
          <option value="medium" selected>Medium</option>
          <option value="hard">Hard</option>
        </select>
        <button id="quickBtn" type="submit">Generate</button>
        <span id="quickStatus" class="status" aria-live="polite"></span>
      </form>

      <!-- Ready panel (shown after generation). User must press Start. -->
      <div id="readyPanel" class="ready" hidden>
        <div class="ready-text">✅ Quiz generated. Review options or press Start to begin.</div>
        <div class="ready-actions">
          <button id="startNow" class="btn primary">Start</button>
          <button id="openEditorFromReady" class="btn">Open in Editor</button>
        </div>
      </div>
    </section>

    <!-- JSON quiz renders here -->
    <section class="quiz" id="quizView" hidden></section>

    <!-- Manual editor: hidden by default; opened via Manual ▾ -->
    <section class="editor" id="editorPane" hidden>
      <h2>Manual Editor</h2>
      <textarea id="quizInput" placeholder="Paste MC|… lines, then Start from Manual ▾"></textarea>
      <div class="hint">Supports MC / TF / YN lines. Use Manual ▾ to load .txt, use demo, clear, or start.</div>
      <button id="startQuiz" type="button">Start Quiz from Editor</button>
    </section>
  </main>

  <!-- Full-screen veil during generation -->
  <div id="veil" hidden>
    <div class="veil-box">
      <div class="spinner"></div>
      <div class="veil-msg" id="veilMsg">Summoning questions…</div>
    </div>
  </div>

  <script src="app.js" defer></script>
</body>